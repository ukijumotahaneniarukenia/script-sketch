- IN

```
$cat test.json
[
  {
    "id": "abc",
    "name": "name-middlenane-lastname-1"
  },
  {
    "id": "123",
    "name": "fname-flast-2"
  }
]
```

- CMD

  - map関数は透過的に振舞ってくれるので、入れ子にすることで、newkeyを生成できている。
  - captureしないところをカッコしないことで、除外できている。
  - sed,perl,awkとかで除外設定するイメージ。

```
$cat test.json | jq 'map(. + (.name | capture("(?<newkey>.+)-[0-9]+")) )'
```

- OUT

```
[
  {
    "id": "abc",
    "name": "name-middlenane-lastname-1",
    "newkey": "name-middlenane-lastname"
  },
  {
    "id": "123",
    "name": "fname-flast-2",
    "newkey": "fname-flast"
  }
]
```
