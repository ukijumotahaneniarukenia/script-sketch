IN

```
$ echo '{"a":[{"b":1}]}' | jq
{
  "a": [
    {
      "b": 1
    }
  ]
}
```

CMD

```
$ echo '{"a":[{"b":1}]}' | jq -cr '. as $in|[path(..)]|map(. as $path|{"k":($path|map(if type == "string" then "."+. else "["+tostring+"]" end)|join("")),"v":($in|getpath($path))})[]|"\(.k)\t\(.v)"'
```

OUT

```
	{"a":[{"b":1}]}
.a	[{"b":1}]
.a[0]	{"b":1}
.a[0].b	1
```

IN

```
$ echo '{"a":[{"b":1}]}' | jq
{
  "a": [
    {
      "b": 1
    }
  ]
}
```

CMD

```
$ echo '{"a":[{"b":1}]}' | jq -cr '. as $in|[path(..)]|map(. as $path|{"k":($path|map(if type == "number" then "["+tostring+"]" else "."+. end)|join("")),"v":($in|getpath($path))})[]|"\(.k)\t\(.v)"'
```

OUT

```
	{"a":[{"b":1}]}
.a	[{"b":1}]
.a[0]	{"b":1}
.a[0].b	1
```


VER

```
$ jq --version
jq-1.6
```

IN

```
$ echo '{"a":[{"b":1}],"c":null}' | jq
{
  "a": [
    {
      "b": 1
    }
  ],
  "c": null
}
```

CMD

```
$ echo '{"a":[{"b":1}],"c":null}' | jq -cr '. as $in|[path(..)]|map(. as $path|{"k":($path|map(if type == "string" then "."+. else "["+tostring+"]" end)|join("")),"v":($in|getpath($path))})[]|"\(.k)\t\(.v)"'|sed '1ikey\tvalue'
```

OUT

```
key value
    {"a":[{"b":1}],"c":null}
.a  [{"b":1}]
.a[0]   {"b":1}
.a[0].b 1
.c  null
```


IN

シングルクォートとか入っている場合も考慮してvalue側でtojsonにする

```
$ cat a.json
{
  "imdb-info": {
    "score": 8.6,
    "synopsis": "A team of explorers travel through a wormhole in space in an\n                attempt to ensure humanity's survival.",
    "url": "http://www.imdb.com/title/tt0816692/"
  }
}
```


CMD

```
$ cat a.json  | jq -cr '. as $in|[path(..)]|map(. as $path|{"k":($path|map(if type == "string" then "."+. else "["+tostring+"]" end)|join("")),"v":($in|getpath($path))})[]|"\(.k)\t\(.v|tojson)"'|sed '1ikey\tvalue'
```


OUT

```
key	value
	{"imdb-info":{"score":8.6,"synopsis":"A team of explorers travel through a wormhole in space in an\n                attempt to ensure humanity's survival.","url":"http://www.imdb.com/title/tt0816692/"}}
.imdb-info	{"score":8.6,"synopsis":"A team of explorers travel through a wormhole in space in an\n                attempt to ensure humanity's survival.","url":"http://www.imdb.com/title/tt0816692/"}
.imdb-info.score	8.6
.imdb-info.synopsis	"A team of explorers travel through a wormhole in space in an\n                attempt to ensure humanity's survival."
.imdb-info.url	"http://www.imdb.com/title/tt0816692/"
```
