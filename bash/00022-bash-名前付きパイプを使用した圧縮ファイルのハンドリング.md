- http://huruyosi.hatenablog.com/entry/2015/10/20/014254

```
$mkfifo in.pipe

$ls -l in.pipe
prw-r--r--. 1 kuraine kuraine 0  5月 21 22:45 in.pipe

```


圧縮件数１億件

```
$grep -c '' done
100000001
```

ファイル圧縮

```
$ls -l in.pipe
prw-r--r--. 1 kuraine kuraine 0  5月 21 22:45 in.pipe

$cat in.pipe | gzip -c >dmp.gzip &
[1] 28618

$time cat done > in.pipe

real	1m54.753s
user	0m0.059s
sys	0m1.959s

$ls -l done
-rw-r--r--. 1 kuraine kuraine 3400000050  5月 21 22:40 done

$ls -lh done
-rw-r--r--. 1 kuraine kuraine 3.2G  5月 21 22:40 done

$ls -lh dmp.gzip
-rw-r--r--. 1 kuraine kuraine 1.1G  5月 21 22:49 dmp.gzip

```


ファイル解凍


```
$gzip -dc dmp.gzip > in.pipe &
[1] 28665


$time cp in.pipe done-d

real	0m17.832s
user	0m14.531s
sys	0m2.908s

ls -lh done*
-rw-r--r--. 1 kuraine kuraine 3.2G  5月 21 22:40 done
-rw-r--r--. 1 kuraine kuraine 3.2G  5月 21 22:57 done-d
$diff done done-d

```


１ギガのファイルを複製

```
$ls -lh dmp.gzip
-rw-r--r--. 1 kuraine kuraine 1.1G  5月 21 22:49 dmp.gzip
```

```
$time for i in {1..3};do echo $i;done | xargs -I@ cp dmp.gzip dmp-@.gzip

real	0m1.530s
user	0m0.012s
sys	0m1.502s

$ls -l dmp*
-rw-r--r--. 1 kuraine kuraine 1084716581  5月 21 23:03 dmp-1.gzip
-rw-r--r--. 1 kuraine kuraine 1084716581  5月 21 23:03 dmp-2.gzip
-rw-r--r--. 1 kuraine kuraine 1084716581  5月 21 23:03 dmp-3.gzip
-rw-r--r--. 1 kuraine kuraine 1084716581  5月 21 22:49 dmp.gzip

$ls -lh dmp*
-rw-r--r--. 1 kuraine kuraine 1.1G  5月 21 23:03 dmp-1.gzip
-rw-r--r--. 1 kuraine kuraine 1.1G  5月 21 23:03 dmp-2.gzip
-rw-r--r--. 1 kuraine kuraine 1.1G  5月 21 23:03 dmp-3.gzip
-rw-r--r--. 1 kuraine kuraine 1.1G  5月 21 22:49 dmp.gzip

```

複数圧縮ファイルを単一圧縮ファイルに集約


```
$ls *-[0-9].gzip
dmp-1.gzip  dmp-2.gzip  dmp-3.gzip

$cat in.pipe | gzip -c >dmp-all.gzip &
[1] 28720

$time ls *-[0-9].gzip | xargs zcat > in.pipe

real	5m32.999s
user	0m46.619s
sys	0m2.325s

$ls -lh dmp-all.gzip
-rw-r--r--. 1 kuraine kuraine 3.1G  5月 21 23:15 dmp-all.gzip
kuraine doc-ubuntu-19-10-go-vscode ~/script-sketch/Tukubai$

```
