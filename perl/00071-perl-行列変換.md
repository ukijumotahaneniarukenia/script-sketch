- IN

```
$cat test.csv
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10,20190206
0003,apple,11,20190206
0004,banana,7,20190208
0005,banana,3,20190209
0006,banana,4,20190202
0007,kiwii,10,20190201
0008,kiwii,5,20190209
```

- CMD

```
$cat test.csv | perl -F',' -anlE '$,=":";for(0..$#F){$m{$_}=$m{$_}.",".$F[$_]};END{map{say $m{$_}} keys %m}'
,item,apple,apple,apple,banana,banana,banana,kiwii,kiwii
,id,0001,0002,0003,0004,0005,0006,0007,0008
,qty,6,10,11,7,3,4,10,5
,dtm,20190201,20190206,20190206,20190208,20190209,20190202,20190201,20190209
```


- CMD
  - スカラをそのまま配列変数にするのは、トリッキー
  - https://stackoverflow.com/questions/3249508/transpose-in-perl
```
$cat test.csv | perl -anF',|\n' -e'map{push(@{$$m[$_]},$F[$_])}(0..$#F);END{print map{join"\t",@$_,"\n"}@$m}'
```

- OUT

```
id	0001	0002	0003	0004	0005	0006	0007	0008	
item	apple	apple	apple	banana	banana	banana	kiwii	kiwii	
qty	6	10	11	7	3	4	10	5	
dtm	20190201	20190206	20190206	20190208	20190209	20190202	20190201	20190209	
```

- CMD

```
$cat test.csv | perl -anF',|\n' -E'map{say \$m[$_];push(@{$$m[$_]},$F[$_])}(0..$#F);END{print map{join"\t",@$_,"\n"}@$m}'
```


- OUT

```
SCALAR(0x5577c80d2c28)
SCALAR(0x5577c80ded70)
SCALAR(0x5577c80b0390)
SCALAR(0x5577c80de9e0)
SCALAR(0x5577c80d2c28)
SCALAR(0x5577c80ded70)
SCALAR(0x5577c80b0390)
SCALAR(0x5577c80de9e0)
SCALAR(0x5577c80d2c28)
SCALAR(0x5577c80ded70)
SCALAR(0x5577c80b0390)
SCALAR(0x5577c80de9e0)
SCALAR(0x5577c80d2c28)
SCALAR(0x5577c80ded70)
SCALAR(0x5577c80b0390)
SCALAR(0x5577c80de9e0)
SCALAR(0x5577c80d2c28)
SCALAR(0x5577c80ded70)
SCALAR(0x5577c80b0390)
SCALAR(0x5577c80de9e0)
SCALAR(0x5577c80d2c28)
SCALAR(0x5577c80ded70)
SCALAR(0x5577c80b0390)
SCALAR(0x5577c80de9e0)
SCALAR(0x5577c80d2c28)
SCALAR(0x5577c80ded70)
SCALAR(0x5577c80b0390)
SCALAR(0x5577c80de9e0)
SCALAR(0x5577c80d2c28)
SCALAR(0x5577c80ded70)
SCALAR(0x5577c80b0390)
SCALAR(0x5577c80de9e0)
SCALAR(0x5577c80d2c28)
SCALAR(0x5577c80ded70)
SCALAR(0x5577c80b0390)
SCALAR(0x5577c80de9e0)
```

- OUT

```
id	0001	0002	0003	0004	0005	0006	0007	0008	
item	apple	apple	apple	banana	banana	banana	kiwii	kiwii	
qty	6	10	11	7	3	4	10	5	
dtm	20190201	20190206	20190206	20190208	20190209	20190202	20190201	20190209	
```

