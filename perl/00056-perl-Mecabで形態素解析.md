- REF

  - https://metacpan.org/pod/Text::MeCab
  - http://teahut.sakura.ne.jp/b/2007-07-05-1.html

- LIB

```
$cpanm install Text::MeCab
```

- IN

```

```


- CMD

```
$perl -MText::MeCab -e 'my $m=Text::MeCab->new();my $s="日本語の形態素解析のテストをしてみます。";for(my $n=$m->parse($s);$n;$n=$n->next){print $n->surface,"\n"}'
```

- OUT

```
日本語
の
形態素
解析
の
テスト
を
し
て
み
ます
。

```


- CMD

```
#!/usr/bin/env perl

use strict;
use Text::MeCab;

my $mecab = Text::MeCab->new();
my $text = "日本語の形態素解析のテストを行ってみます";

for (my $node = $mecab->parse($text); $node; $node = $node->next) {
   print $node->surface, "\n";
   print $node->feature, "\n";
}
```


- OUT

```
日本語
名詞,一般,*,*,*,*,日本語,ニホンゴ,ニホンゴ
の
助詞,連体化,*,*,*,*,の,ノ,ノ
形態素
名詞,一般,*,*,*,*,形態素,ケイタイソ,ケイタイソ
解析
名詞,サ変接続,*,*,*,*,解析,カイセキ,カイセキ
の
助詞,連体化,*,*,*,*,の,ノ,ノ
テスト
名詞,サ変接続,*,*,*,*,テスト,テスト,テスト
を
助詞,格助詞,一般,*,*,*,を,ヲ,ヲ
行っ
動詞,自立,*,*,五段・ワ行促音便,連用タ接続,行う,オコナッ,オコナッ
て
助詞,接続助詞,*,*,*,*,て,テ,テ
み
動詞,非自立,*,*,一段,連用形,みる,ミ,ミ
ます
助動詞,*,*,*,特殊・マス,基本形,ます,マス,マス

BOS/EOS,*,*,*,*,*,*,*,*
```


- IN

```
cat test-nlp.txt
けいけんしゃ。
なんべいどろ。
魅力かんぜんやさしい。
あらそう雑音不可欠電話。
シアトルしおとといおんとうひきさく休日。
恨み始まる新婚旅行ちきゅういつ頃ほ。
天井鈍器魅力りょうど人性仕方がないほんらい。
あしくび浅い誓い絹糸ししょくしあとるしじきしょうそうまつり。
薬にんい屈む堀川間隔芸者渦巻きあう魔術。
フランス人殺人者救急車日没床いく施行あびるすいせん米兵。
```

- CMD

```
#!/usr/bin/env bash

cat test-nlp.txt | \
  perl -MText::MeCab -ne '
    $,="\t";
    my $m=Text::MeCab->new();
    my $c=0;
    for(my $n=$m->parse($_);$n;$n=$n->next){
      if($n->surface){
        #からじゃない
        print $.,$c++,$n->surface,$n->feature,"\n";
      }else{
        #からのばあい、初期化
        $c=0;
      }
    }
'
```


- OUT

```
1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン	
1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ	
1	2	。	記号,句点,*,*,*,*,。,。,。	
2	0	なん	名詞,代名詞,一般,*,*,*,なん,ナン,ナン	
2	1	べ	助詞,終助詞,*,*,*,*,べ,ベ,ベ	
2	2	い	動詞,自立,*,*,一段,連用形,いる,イ,イ	
2	3	どろ	動詞,非自立,*,*,五段・ラ行,未然ウ接続,どる,ドロ,ドロ	
2	4	。	記号,句点,*,*,*,*,。,。,。	
3	0	魅力	名詞,一般,*,*,*,*,魅力,ミリョク,ミリョク	
3	1	かんぜん	副詞,一般,*,*,*,*,かんぜん,カンゼン,カンゼン	
3	2	やさしい	形容詞,自立,*,*,形容詞・イ段,基本形,やさしい,ヤサシイ,ヤサシイ	
3	3	。	記号,句点,*,*,*,*,。,。,。	
4	0	あらそう	動詞,自立,*,*,五段・ワ行促音便,基本形,あらそう,アラソウ,アラソウ	
4	1	雑音	名詞,一般,*,*,*,*,雑音,ザツオン,ザツオン	
4	2	不可欠	名詞,形容動詞語幹,*,*,*,*,不可欠,フカケツ,フカケツ	
4	3	電話	名詞,サ変接続,*,*,*,*,電話,デンワ,デンワ	
4	4	。	記号,句点,*,*,*,*,。,。,。	
5	0	シアトル	名詞,固有名詞,地域,一般,*,*,シアトル,シアトル,シアトル	
5	1	し	動詞,自立,*,*,サ変・スル,連用形,する,シ,シ	
5	2	おととい	名詞,副詞可能,*,*,*,*,おととい,オトトイ,オトトイ	
5	3	おん	名詞,一般,*,*,*,*,おん,オン,オン	
5	4	とう	副詞,助詞類接続,*,*,*,*,とう,トウ,トウ	
5	5	ひきさく	動詞,自立,*,*,五段・カ行イ音便,基本形,ひきさく,ヒキサク,ヒキサク	
5	6	休日	名詞,副詞可能,*,*,*,*,休日,キュウジツ,キュージツ	
5	7	。	記号,句点,*,*,*,*,。,。,。	
6	0	恨み	動詞,自立,*,*,五段・マ行,連用形,恨む,ウラミ,ウラミ	
6	1	始まる	動詞,自立,*,*,五段・ラ行,基本形,始まる,ハジマル,ハジマル	
6	2	新婚	名詞,一般,*,*,*,*,新婚,シンコン,シンコン	
6	3	旅行	名詞,サ変接続,*,*,*,*,旅行,リョコウ,リョコー	
6	4	ち	動詞,自立,*,*,五段・ラ行,体言接続特殊２,ちる,チ,チ	
6	5	きゅう	名詞,一般,*,*,*,*,きゅう,キュウ,キュー	
6	6	い	動詞,自立,*,*,一段,連用形,いる,イ,イ	
6	7	つ	助動詞,*,*,*,下二・タ行,基本形,つ,ツ,ツ	
6	8	頃	名詞,非自立,副詞可能,*,*,*,頃,コロ,コロ	
6	9	ほ	動詞,自立,*,*,五段・ラ行,体言接続特殊２,ほる,ホ,ホ	
6	10	。	記号,句点,*,*,*,*,。,。,。	
7	0	天井	名詞,一般,*,*,*,*,天井,テンジョウ,テンジョー	
7	1	鈍器	名詞,一般,*,*,*,*,鈍器,ドンキ,ドンキ	
7	2	魅力	名詞,一般,*,*,*,*,魅力,ミリョク,ミリョク	
7	3	りょう	名詞,一般,*,*,*,*,りょう,リョウ,リョー	
7	4	ど	接頭詞,名詞接続,*,*,*,*,ど,ド,ド	
7	5	人性	名詞,一般,*,*,*,*,人性,ジンセイ,ジンセイ	
7	6	仕方	名詞,ナイ形容詞語幹,*,*,*,*,仕方,シカタ,シカタ	
7	7	が	助詞,格助詞,一般,*,*,*,が,ガ,ガ	
7	8	ない	形容詞,自立,*,*,形容詞・アウオ段,基本形,ない,ナイ,ナイ	
7	9	ほんらい	副詞,一般,*,*,*,*,ほんらい,ホンライ,ホンライ	
7	10	。	記号,句点,*,*,*,*,。,。,。	
8	0	あしく	形容詞,自立,*,*,形容詞・イ段,連用テ接続,あしい,アシク,アシク	
8	1	び	名詞,一般,*,*,*,*,*	
8	2	浅い	形容詞,自立,*,*,形容詞・アウオ段,基本形,浅い,アサイ,アサイ	
8	3	誓い	動詞,自立,*,*,五段・ワ行促音便,連用形,誓う,チカイ,チカイ	
8	4	絹糸	名詞,一般,*,*,*,*,絹糸,ケンシ,ケンシ	
8	5	し	動詞,自立,*,*,サ変・スル,連用形,する,シ,シ	
8	6	し	助動詞,*,*,*,文語・キ,体言接続,き,シ,シ	
8	7	ょくしあとるしじきしょうそうまつり	名詞,一般,*,*,*,*,*	
8	8	。	記号,句点,*,*,*,*,。,。,。	
9	0	薬	名詞,一般,*,*,*,*,薬,クスリ,クスリ	
9	1	に	助詞,格助詞,一般,*,*,*,に,ニ,ニ	
9	2	ん	名詞,非自立,一般,*,*,*,ん,ン,ン	
9	3	い	動詞,自立,*,*,一段,連用形,いる,イ,イ	
9	4	屈む	動詞,自立,*,*,五段・マ行,基本形,屈む,カガム,カガム	
9	5	堀川	名詞,固有名詞,人名,姓,*,*,堀川,ホリカワ,ホリカワ	
9	6	間隔	名詞,一般,*,*,*,*,間隔,カンカク,カンカク	
9	7	芸者	名詞,一般,*,*,*,*,芸者,ゲイシャ,ゲイシャ	
9	8	渦巻き	動詞,自立,*,*,五段・カ行イ音便,連用形,渦巻く,ウズマキ,ウズマキ	
9	9	あう	動詞,非自立,*,*,五段・ワ行促音便,基本形,あう,アウ,アウ	
9	10	魔術	名詞,一般,*,*,*,*,魔術,マジュツ,マジュツ	
9	11	。	記号,句点,*,*,*,*,。,。,。	
10	0	フランス	名詞,固有名詞,地域,国,*,*,フランス,フランス,フランス	
10	1	人	名詞,接尾,一般,*,*,*,人,ジン,ジン	
10	2	殺人	名詞,一般,*,*,*,*,殺人,サツジン,サツジン	
10	3	者	名詞,接尾,一般,*,*,*,者,シャ,シャ	
10	4	救急	名詞,一般,*,*,*,*,救急,キュウキュウ,キューキュー	
10	5	車	名詞,接尾,一般,*,*,*,車,シャ,シャ	
10	6	日没	名詞,一般,*,*,*,*,日没,ニチボツ,ニチボツ	
10	7	床	名詞,一般,*,*,*,*,床,ユカ,ユカ	
10	8	いく	動詞,自立,*,*,五段・カ行促音便,基本形,いく,イク,イク	
10	9	施行	名詞,サ変接続,*,*,*,*,施行,シコウ,シコー	
10	10	あびる	動詞,自立,*,*,一段,基本形,あびる,アビル,アビル	
10	11	すいせん	名詞,一般,*,*,*,*,すいせん,スイセン,スイセン	
10	12	米兵	名詞,一般,*,*,*,*,米兵,ベイヘイ,ベイヘイ	
10	13	。	記号,句点,*,*,*,*,。,。,。	
```

- IN

```
$cat test-nlp-done.tsv|head -n3
1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン	
1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ	
1	2	。	記号,句点,*,*,*,*,。,。,。	
```

- CMD

```
$cat test-nlp-done.tsv|head -n3 |awk -v FS='\t' -v OFS='\t'  '{ele_cnt=split($4,array,",");for(i=ele_cnt;i>0;i--)print NR,i,array[i],$0}' | sort -nk1,2 | keta
```


- OUT

```
1 1       名詞 1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン
1 2       一般 1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン
1 3          * 1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン
1 4          * 1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン
1 5          * 1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン
1 6          * 1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン
1 7   けいけん 1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン
1 8   ケイケン 1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン
1 9   ケイケン 1	0	けいけん	名詞,一般,*,*,*,*,けいけん,ケイケン,ケイケン
2 1       動詞 1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ
2 2       接尾 1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ
2 3          * 1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ
2 4          * 1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ
2 5 五段・サ行 1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ
2 6 仮定縮約１ 1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ
2 7         す 1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ
2 8       シャ 1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ
2 9       シャ 1	1	しゃ	動詞,接尾,*,*,五段・サ行,仮定縮約１,す,シャ,シャ
3 1       記号                         1	2	。	記号,句点,*,*,*,*,。,。,。
3 2       句点                         1	2	。	記号,句点,*,*,*,*,。,。,。
3 3          *                         1	2	。	記号,句点,*,*,*,*,。,。,。
3 4          *                         1	2	。	記号,句点,*,*,*,*,。,。,。
3 5          *                         1	2	。	記号,句点,*,*,*,*,。,。,。
3 6          *                         1	2	。	記号,句点,*,*,*,*,。,。,。
3 7         。                         1	2	。	記号,句点,*,*,*,*,。,。,。
3 8         。                         1	2	。	記号,句点,*,*,*,*,。,。,。
3 9         。                         1	2	。	記号,句点,*,*,*,*,。,。,。
```
