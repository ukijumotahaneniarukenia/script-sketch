- IN

```
echo -e "'100',orange,アップル,豚\nbanana,ばなな,ピーチ,'10,000'\nキウイ,kiwii,peach,'1,000',avocado\nご飯,ぐるめ,のり,梅干し,芋"
'100',orange,アップル,豚
banana,ばなな,ピーチ,'10,000'
キウイ,kiwii,peach,'1,000',avocado
ご飯,ぐるめ,のり,梅干し,芋
```

- CMD

  - 先頭にシングルクヲート
  - シングルクヲート以外の文字列が0回以上続き、その後にシングルクヲートが1回
  - シングルクヲート以外の文字列が0回以上続き、その後にシングルクヲートが1回
  - 上記２つをグループキャッチしたものが0回以上続き、その後にシングルクヲート以外の文字列が0回以上


  - やりたいことは、シングルクヲートに囲まれていない文字列のカンマをsplit関数のパタンキャッチに渡している

- https://jex.im/regulex/#!flags=&re=%2C(%3F%3D(%3F%3A%5B%5E%5Cx27%5D*%5Cx27%5B%5E%5Cx27%5D*%5Cx27)*%5B%5E%5Cx27%5D*%24)

```
,(?=(?:[^\x27]*\x27[^\x27]*\x27)*[^\x27]*$)

,


(?=(?:[^\x27]*\x27[^\x27]*\x27)*[^\x27]*$)

(?:[^\x27]*\x27[^\x27]*\x27)* --'10,000','100','1,000'

or

[^\x27]* --あ,い,う...

$

```
  
  
```
echo -e "'100',orange,アップル,豚\nbanana,ばなな,ピーチ,'10,000'\nキウイ,kiwii,peach,'1,000',avocado\nご飯,ぐるめ,のり,梅干し,芋" | perl -nle '
  $,=",";@ary=split(/,(?=(?:[^\x27]*\x27[^\x27]*\x27)*[^\x27]*$)/,$_);
  while(my($idx,$ele)=each(@ary)){
    print $.,$idx,$ele;
  }
  '
```


- OUT

```
1,0,'100'
1,1,orange
1,2,アップル
1,3,豚
2,0,banana
2,1,ばなな
2,2,ピーチ
2,3,'10,000'
3,0,キウイ
3,1,kiwii
3,2,peach
3,3,'1,000'
3,4,avocado
4,0,ご飯
4,1,ぐるめ
4,2,のり
4,3,梅干し
4,4,芋
```

グループ化していないキャプチャがこれだとだめ

```
echo -e "'100',orange,アップル,豚\nbanana,ばなな,ピーチ,'10,000'\nキウイ,kiwii,peach,'1,000',avocado\nご飯,ぐるめ,のり,梅干し,芋" | perl -nle '
  $,=",";@ary=split(/,(?=(?:\x27[^\x27]*\x27)*[^\x27]*$)/,$_);
  while(my($idx,$ele)=each(@ary)){
    print $.,$idx,$ele;
  }
  '
1,0,'100'
1,1,orange
1,2,アップル
1,3,豚
2,0,banana,ばなな,ピーチ
2,1,'10,000'
3,0,キウイ,kiwii,peach
3,1,'1,000'
3,2,avocado
4,0,ご飯
4,1,ぐるめ
4,2,のり
4,3,梅干し
4,4,芋
```
