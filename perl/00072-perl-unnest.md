- CMD
  - スカラで配列変数便利
  - debug用
```
$cat test-transpose.tsv | perl -F'\t' -anlE '$,=",";map{push(@{$$m[$_]},$F[$_]);map{say @$_}@$m;}(0..$#F);'
```

- OUT

```
id
id
0001
id
0001
0002
id
0001
0002
0003
id
0001
0002
0003
0004
id
0001
0002
0003
0004
0005
id
0001
0002
0003
0004
0005
0006
id
0001
0002
0003
0004
0005
0006
0007
id
0001
0002
0003
0004
0005
0006
0007
0008
id,item
0001
0002
0003
0004
0005
0006
0007
0008
id,item
0001,apple
0002
0003
0004
0005
0006
0007
0008
id,item
0001,apple
0002,apple
0003
0004
0005
0006
0007
0008
id,item
0001,apple
0002,apple
0003,apple
0004
0005
0006
0007
0008
id,item
0001,apple
0002,apple
0003,apple
0004,banana
0005
0006
0007
0008
id,item
0001,apple
0002,apple
0003,apple
0004,banana
0005,banana
0006
0007
0008
id,item
0001,apple
0002,apple
0003,apple
0004,banana
0005,banana
0006,banana
0007
0008
id,item
0001,apple
0002,apple
0003,apple
0004,banana
0005,banana
0006,banana
0007,kiwii
0008
id,item
0001,apple
0002,apple
0003,apple
0004,banana
0005,banana
0006,banana
0007,kiwii
0008,kiwii
id,item,qty
0001,apple
0002,apple
0003,apple
0004,banana
0005,banana
0006,banana
0007,kiwii
0008,kiwii
id,item,qty
0001,apple,6
0002,apple
0003,apple
0004,banana
0005,banana
0006,banana
0007,kiwii
0008,kiwii
id,item,qty
0001,apple,6
0002,apple,10
0003,apple
0004,banana
0005,banana
0006,banana
0007,kiwii
0008,kiwii
id,item,qty
0001,apple,6
0002,apple,10
0003,apple,11
0004,banana
0005,banana
0006,banana
0007,kiwii
0008,kiwii
id,item,qty
0001,apple,6
0002,apple,10
0003,apple,11
0004,banana,7
0005,banana
0006,banana
0007,kiwii
0008,kiwii
id,item,qty
0001,apple,6
0002,apple,10
0003,apple,11
0004,banana,7
0005,banana,3
0006,banana
0007,kiwii
0008,kiwii
id,item,qty
0001,apple,6
0002,apple,10
0003,apple,11
0004,banana,7
0005,banana,3
0006,banana,4
0007,kiwii
0008,kiwii
id,item,qty
0001,apple,6
0002,apple,10
0003,apple,11
0004,banana,7
0005,banana,3
0006,banana,4
0007,kiwii,10
0008,kiwii
id,item,qty
0001,apple,6
0002,apple,10
0003,apple,11
0004,banana,7
0005,banana,3
0006,banana,4
0007,kiwii,10
0008,kiwii,5
id,item,qty,dtm
0001,apple,6
0002,apple,10
0003,apple,11
0004,banana,7
0005,banana,3
0006,banana,4
0007,kiwii,10
0008,kiwii,5
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10
0003,apple,11
0004,banana,7
0005,banana,3
0006,banana,4
0007,kiwii,10
0008,kiwii,5
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10,20190206
0003,apple,11
0004,banana,7
0005,banana,3
0006,banana,4
0007,kiwii,10
0008,kiwii,5
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10,20190206
0003,apple,11,20190206
0004,banana,7
0005,banana,3
0006,banana,4
0007,kiwii,10
0008,kiwii,5
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10,20190206
0003,apple,11,20190206
0004,banana,7,20190208
0005,banana,3
0006,banana,4
0007,kiwii,10
0008,kiwii,5
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10,20190206
0003,apple,11,20190206
0004,banana,7,20190208
0005,banana,3,20190209
0006,banana,4
0007,kiwii,10
0008,kiwii,5
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10,20190206
0003,apple,11,20190206
0004,banana,7,20190208
0005,banana,3,20190209
0006,banana,4,20190202
0007,kiwii,10
0008,kiwii,5
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10,20190206
0003,apple,11,20190206
0004,banana,7,20190208
0005,banana,3,20190209
0006,banana,4,20190202
0007,kiwii,10,20190201
0008,kiwii,5
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10,20190206
0003,apple,11,20190206
0004,banana,7,20190208
0005,banana,3,20190209
0006,banana,4,20190202
0007,kiwii,10,20190201
0008,kiwii,5,20190209
```


- CMD
  - ENDパタンで最終行のみ抽出
```
$cat test-transpose.tsv | perl -F'\t' -anlE '$,=",";map{push(@{$$m[$_]},$F[$_]);}(0..$#F);END{map{say @{$_}}@$m}'
```

- OUT

```
id,item,qty,dtm
0001,apple,6,20190201
0002,apple,10,20190206
0003,apple,11,20190206
0004,banana,7,20190208
0005,banana,3,20190209
0006,banana,4,20190202
0007,kiwii,10,20190201
0008,kiwii,5,20190209
```

- CMD
  - タブ
```
$cat test-transpose.tsv | perl -F'\t' -anlE '$,="\t";map{push(@{$$m[$_]},$F[$_]);}(0..$#F);END{map{say @{$_}}@$m}'
```

- OUT

```
id	item	qty	dtm
0001	apple	6	20190201
0002	apple	10	20190206
0003	apple	11	20190206
0004	banana	7	20190208
0005	banana	3	20190209
0006	banana	4	20190202
0007	kiwii	10	20190201
0008	kiwii	5	20190209
```
