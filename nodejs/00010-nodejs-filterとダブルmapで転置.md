- IN

```
$cat test.csv
rn,grp,subgrp,strdat,numdat,dtmdat
1,a,c,Y,11,2020-03-21
2,a,c,I,12,2020-03-22
3,a,d,V,4,2020-03-23
4,a,d,D,15,2020-03-24
5,b,c,Q,5,2020-03-25
6,b,c,C,8,2020-03-26
7,b,d,L,6,2020-03-27
8,b,d,R,10,2020-03-28
9,b,d,U,3,2020-03-29
```

- ヘッダ行を除く

```
$cat test.csv | sed -n '2,$p'
1,a,c,Y,11,2020-03-21
2,a,c,I,12,2020-03-22
3,a,d,V,4,2020-03-23
4,a,d,D,15,2020-03-24
5,b,c,Q,5,2020-03-25
6,b,c,C,8,2020-03-26
7,b,d,L,6,2020-03-27
8,b,d,R,10,2020-03-28
9,b,d,U,3,2020-03-29
```

- CMD
  - CSVファイルをそのままよみこんだとき
```
$cat test.csv | sed -n '2,$p'| node -e 'let s=require("fs").readFileSync("/dev/stdin","utf8");a=s.replace(/\n$/,"").split("\n");b=a.map(e=>e.split(","));console.log(b)'
```

- OUT

```
[
  [ '1', 'a', 'c', 'Y', '11', '2020-03-21' ],
  [ '2', 'a', 'c', 'I', '12', '2020-03-22' ],
  [ '3', 'a', 'd', 'V', '4', '2020-03-23' ],
  [ '4', 'a', 'd', 'D', '15', '2020-03-24' ],
  [ '5', 'b', 'c', 'Q', '5', '2020-03-25' ],
  [ '6', 'b', 'c', 'C', '8', '2020-03-26' ],
  [ '7', 'b', 'd', 'L', '6', '2020-03-27' ],
  [ '8', 'b', 'd', 'R', '10', '2020-03-28' ],
  [ '9', 'b', 'd', 'U', '3', '2020-03-29' ]
]
```


- CMD
  - これを転置する

```
$cat test.csv | sed -n '2,$p'| node -e 'let s=require("fs").readFileSync("/dev/stdin","utf8");a=s.replace(/\n$/,"").split("\n");b=a.map(e=>e.split(","));c=b.map((_,idx)=>b.map(x=>x[idx]));d=c.map(x=>x.filter(xx=>"undefined"!=typeof(xx)));e=d.filter(x=>x.length!=0);console.log(e)'
```


- OUT

```
[
  [
    '1', '2', '3',
    '4', '5', '6',
    '7', '8', '9'
  ],
  [
    'a', 'a', 'a',
    'a', 'b', 'b',
    'b', 'b', 'b'
  ],
  [
    'c', 'c', 'd',
    'd', 'c', 'c',
    'd', 'd', 'd'
  ],
  [
    'Y', 'I', 'V',
    'D', 'Q', 'C',
    'L', 'R', 'U'
  ],
  [
    '11', '12', '4',
    '15', '5',  '8',
    '6',  '10', '3'
  ],
  [
    '2020-03-21',
    '2020-03-22',
    '2020-03-23',
    '2020-03-24',
    '2020-03-25',
    '2020-03-26',
    '2020-03-27',
    '2020-03-28',
    '2020-03-29'
  ]
]
```

- CMD
  - テーブルのほうがみやすいか
```
$cat test.csv | sed -n '2,$p'| node -e 'let s=require("fs").readFileSync("/dev/stdin","utf8");a=s.replace(/\n$/,"").split("\n");b=a.map(e=>e.split(","));c=b.map((_,idx)=>b.map(x=>x[idx]));d=c.map(x=>x.filter(xx=>"undefined"!=typeof(xx)));e=d.filter(x=>x.length!=0);console.table(e)'
┌─────────┬──────────────┬──────────────┬──────────────┬──────────────┬──────────────┬──────────────┬──────────────┬──────────────┬──────────────┐
│ (index) │      0       │      1       │      2       │      3       │      4       │      5       │      6       │      7       │      8       │
├─────────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┤
│    0    │     '1'      │     '2'      │     '3'      │     '4'      │     '5'      │     '6'      │     '7'      │     '8'      │     '9'      │
│    1    │     'a'      │     'a'      │     'a'      │     'a'      │     'b'      │     'b'      │     'b'      │     'b'      │     'b'      │
│    2    │     'c'      │     'c'      │     'd'      │     'd'      │     'c'      │     'c'      │     'd'      │     'd'      │     'd'      │
│    3    │     'Y'      │     'I'      │     'V'      │     'D'      │     'Q'      │     'C'      │     'L'      │     'R'      │     'U'      │
│    4    │     '11'     │     '12'     │     '4'      │     '15'     │     '5'      │     '8'      │     '6'      │     '10'     │     '3'      │
│    5    │ '2020-03-21' │ '2020-03-22' │ '2020-03-23' │ '2020-03-24' │ '2020-03-25' │ '2020-03-26' │ '2020-03-27' │ '2020-03-28' │ '2020-03-29' │
└─────────┴──────────────┴──────────────┴──────────────┴──────────────┴──────────────┴──────────────┴──────────────┴──────────────┴──────────────┘
$cat test.csv | sed -n '2,$p'| node -e 'let s=require("fs").readFileSync("/dev/stdin","utf8");a=s.replace(/\n$/,"").split("\n");b=a.map(e=>e.split(","));c=b.map((_,idx)=>b.map(x=>x[idx]));d=c.map(x=>x.filter(xx=>"undefined"!=typeof(xx)));e=d.filter(x=>x.length!=0);console.table(b)'
┌─────────┬─────┬─────┬─────┬─────┬──────┬──────────────┐
│ (index) │  0  │  1  │  2  │  3  │  4   │      5       │
├─────────┼─────┼─────┼─────┼─────┼──────┼──────────────┤
│    0    │ '1' │ 'a' │ 'c' │ 'Y' │ '11' │ '2020-03-21' │
│    1    │ '2' │ 'a' │ 'c' │ 'I' │ '12' │ '2020-03-22' │
│    2    │ '3' │ 'a' │ 'd' │ 'V' │ '4'  │ '2020-03-23' │
│    3    │ '4' │ 'a' │ 'd' │ 'D' │ '15' │ '2020-03-24' │
│    4    │ '5' │ 'b' │ 'c' │ 'Q' │ '5'  │ '2020-03-25' │
│    5    │ '6' │ 'b' │ 'c' │ 'C' │ '8'  │ '2020-03-26' │
│    6    │ '7' │ 'b' │ 'd' │ 'L' │ '6'  │ '2020-03-27' │
│    7    │ '8' │ 'b' │ 'd' │ 'R' │ '10' │ '2020-03-28' │
│    8    │ '9' │ 'b' │ 'd' │ 'U' │ '3'  │ '2020-03-29' │
└─────────┴─────┴─────┴─────┴─────┴──────┴──────────────┘
```
