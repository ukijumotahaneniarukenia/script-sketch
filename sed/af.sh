#!/bin/bash

echo unko | sed --debug -f <(cat <<EOS
:loop

s;UNKO;loopラベルに分岐きた;;
  
s;unko;UNKO;;

t loop#ラベル間に存在する置換コマンドsが成功時のみloopラベルジャンプ
EOS
)
#SED PROGRAM:
#  :loop
#  s/UNKO/loopラベルに分岐きた/
#  s/unko/UNKO/
#  t loop
#INPUT:   'STDIN' line 1
#PATTERN: unko
#COMMAND: :loop
#COMMAND: s/UNKO/loopラベルに分岐きた/
#PATTERN: unko
#COMMAND: s/unko/UNKO/
#MATCHED REGEX REGISTERS
#  regex[0] = 0-4 'unko'
#PATTERN: UNKO
#COMMAND: t loop
#COMMAND: :loop
#COMMAND: s/UNKO/loopラベルに分岐きた/
#MATCHED REGEX REGISTERS
#  regex[0] = 0-4 'UNKO'
#PATTERN: loop\o37777777743\o37777777603\o37777777651\o37777777743\o37777777603\o37777777631\o37777777743\o37777777603\o37777777653\o37777777743\o37777777601\o37777777653\o37777777745\o37777777610\o37777777606\o37777777745\o37777777662\o37777777620\o37777777743\o37777777601\o37777777615\o37777777743\o37777777601\o37777777637
#COMMAND: s/unko/UNKO/
#PATTERN: loop\o37777777743\o37777777603\o37777777651\o37777777743\o37777777603\o37777777631\o37777777743\o37777777603\o37777777653\o37777777743\o37777777601\o37777777653\o37777777745\o37777777610\o37777777606\o37777777745\o37777777662\o37777777620\o37777777743\o37777777601\o37777777615\o37777777743\o37777777601\o37777777637
#COMMAND: t loop
#COMMAND: :loop
#COMMAND: s/UNKO/loopラベルに分岐きた/
#PATTERN: loop\o37777777743\o37777777603\o37777777651\o37777777743\o37777777603\o37777777631\o37777777743\o37777777603\o37777777653\o37777777743\o37777777601\o37777777653\o37777777745\o37777777610\o37777777606\o37777777745\o37777777662\o37777777620\o37777777743\o37777777601\o37777777615\o37777777743\o37777777601\o37777777637
#COMMAND: s/unko/UNKO/
#PATTERN: loop\o37777777743\o37777777603\o37777777651\o37777777743\o37777777603\o37777777631\o37777777743\o37777777603\o37777777653\o37777777743\o37777777601\o37777777653\o37777777745\o37777777610\o37777777606\o37777777745\o37777777662\o37777777620\o37777777743\o37777777601\o37777777615\o37777777743\o37777777601\o37777777637
#COMMAND: t loop
#END-OF-CYCLE:
#loopラベルに分岐きた

echo unko | sed --debug -f <(cat <<EOS
:loop

s;UNKO;loopラベルに分岐きた;;
  
s;unko;UNKO;;

T loop#ラベル間に存在する置換コマンドsが失敗時のみloopラベルジャンプ
EOS
)
#SED PROGRAM:
#  :loop
#  s/UNKO/loopラベルに分岐きた/
#  s/unko/UNKO/
#  T loop
#INPUT:   'STDIN' line 1
#PATTERN: unko
#COMMAND: :loop
#COMMAND: s/UNKO/loopラベルに分岐きた/
#PATTERN: unko
#COMMAND: s/unko/UNKO/
#MATCHED REGEX REGISTERS
#  regex[0] = 0-4 'unko'
#PATTERN: UNKO
#COMMAND: T loop
#END-OF-CYCLE:
#UNKO
