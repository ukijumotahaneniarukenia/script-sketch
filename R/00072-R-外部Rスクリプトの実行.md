- CMD

```
$Rscript -e 'source("c.R", encoding = "UTF-8",echo = TRUE)' 2>/dev/null
```

- OUT

```

> library(dplyr)

> numdat <- c(11, 12, 4, 15, 5, 8, 6, 10, 3)

> strdat <- c("Y", "I", "V", "D", "Q", "C", "L", "R",
+     "U")

> dtmdat <- seq(Sys.Date(), Sys.Date() + 8, 1)

> grp <- c(rep("a", 4), rep("b", 5))

> subgrp <- c(rep("c", 2), rep("d", 2), rep("c", 2),
+     rep("d", 3))

> df <- data.frame(grp, subgrp, strdat, numdat, dtmdat)

> listagg <- function(tgt, sep) {
+     return(paste(tgt, collapse = sep))
+ }

> df
  grp subgrp strdat numdat     dtmdat
1   a      c      Y     11 2020-03-22
2   a      c      I     12 2020-03-23
3   a      d      V      4 2020-03-24
4   a      d      D     15 2020-03-25
5   b      c      Q      5 2020-03-26
6   b      c      C      8 2020-03-27
7   b      d      L      6 2020-03-28
8   b      d      R     10 2020-03-29
9   b      d      U      3 2020-03-30

> df %>% group_by(grp) %>% summarise_each(list(~max(.)),
+     dtmdat)
# A tibble: 2 x 2
  grp   dtmdat
  <fct> <date>
1 a     2020-03-25
2 b     2020-03-30

> df
  grp subgrp strdat numdat     dtmdat
1   a      c      Y     11 2020-03-22
2   a      c      I     12 2020-03-23
3   a      d      V      4 2020-03-24
4   a      d      D     15 2020-03-25
5   b      c      Q      5 2020-03-26
6   b      c      C      8 2020-03-27
7   b      d      L      6 2020-03-28
8   b      d      R     10 2020-03-29
9   b      d      U      3 2020-03-30

> df %>% group_by(grp) %>% summarise_each(list(~max(.),
+     ~min(.), ~listagg(., ",")), dtmdat)
# A tibble: 2 x 4
  grp   max        min        listagg
  <fct> <date>     <date>     <chr>
1 a     2020-03-25 2020-03-22 2020-03-22,2020-03-23,2020-03-24,2020-03-25
2 b     2020-03-30 2020-03-26 2020-03-26,2020-03-27,2020-03-28,2020-03-29,2020-…

> df
  grp subgrp strdat numdat     dtmdat
1   a      c      Y     11 2020-03-22
2   a      c      I     12 2020-03-23
3   a      d      V      4 2020-03-24
4   a      d      D     15 2020-03-25
5   b      c      Q      5 2020-03-26
6   b      c      C      8 2020-03-27
7   b      d      L      6 2020-03-28
8   b      d      R     10 2020-03-29
9   b      d      U      3 2020-03-30

> df %>% group_by(grp) %>% summarise_each(list(~max(.),
+     ~min(.), ~listagg(., ",")), numdat, dtmdat)
# A tibble: 2 x 7
  grp   numdat_max dtmdat_max numdat_min dtmdat_min numdat_listagg
  <fct>      <dbl> <date>          <dbl> <date>     <chr>
1 a             15 2020-03-25          4 2020-03-22 11,12,4,15
2 b             10 2020-03-30          3 2020-03-26 5,8,6,10,3
# … with 1 more variable: dtmdat_listagg <chr>

> df
  grp subgrp strdat numdat     dtmdat
1   a      c      Y     11 2020-03-22
2   a      c      I     12 2020-03-23
3   a      d      V      4 2020-03-24
4   a      d      D     15 2020-03-25
5   b      c      Q      5 2020-03-26
6   b      c      C      8 2020-03-27
7   b      d      L      6 2020-03-28
8   b      d      R     10 2020-03-29
9   b      d      U      3 2020-03-30

> df %>% group_by(grp, subgrp) %>% summarise_each(list(~max(.)),
+     dtmdat)
# A tibble: 4 x 3
# Groups:   grp [2]
  grp   subgrp dtmdat
  <fct> <fct>  <date>
1 a     c      2020-03-23
2 a     d      2020-03-25
3 b     c      2020-03-27
4 b     d      2020-03-30

> df
  grp subgrp strdat numdat     dtmdat
1   a      c      Y     11 2020-03-22
2   a      c      I     12 2020-03-23
3   a      d      V      4 2020-03-24
4   a      d      D     15 2020-03-25
5   b      c      Q      5 2020-03-26
6   b      c      C      8 2020-03-27
7   b      d      L      6 2020-03-28
8   b      d      R     10 2020-03-29
9   b      d      U      3 2020-03-30

> df %>% group_by(grp, subgrp) %>% summarise_each(list(~max(.),
+     ~min(.), ~listagg(., ",")), dtmdat)
# A tibble: 4 x 5
# Groups:   grp [2]
  grp   subgrp max        min        listagg
  <fct> <fct>  <date>     <date>     <chr>
1 a     c      2020-03-23 2020-03-22 2020-03-22,2020-03-23
2 a     d      2020-03-25 2020-03-24 2020-03-24,2020-03-25
3 b     c      2020-03-27 2020-03-26 2020-03-26,2020-03-27
4 b     d      2020-03-30 2020-03-28 2020-03-28,2020-03-29,2020-03-30

> df
  grp subgrp strdat numdat     dtmdat
1   a      c      Y     11 2020-03-22
2   a      c      I     12 2020-03-23
3   a      d      V      4 2020-03-24
4   a      d      D     15 2020-03-25
5   b      c      Q      5 2020-03-26
6   b      c      C      8 2020-03-27
7   b      d      L      6 2020-03-28
8   b      d      R     10 2020-03-29
9   b      d      U      3 2020-03-30

> df %>% group_by(grp, subgrp) %>% summarise_each(list(~max(.),
+     ~min(.), ~listagg(., ",")), numdat, dtmdat)
# A tibble: 4 x 8
# Groups:   grp [2]
  grp   subgrp numdat_max dtmdat_max numdat_min dtmdat_min numdat_listagg
  <fct> <fct>       <dbl> <date>          <dbl> <date>     <chr>
1 a     c              12 2020-03-23         11 2020-03-22 11,12
2 a     d              15 2020-03-25          4 2020-03-24 4,15
3 b     c               8 2020-03-27          5 2020-03-26 5,8
4 b     d              10 2020-03-30          3 2020-03-28 6,10,3
# … with 1 more variable: dtmdat_listagg <chr>

> df
  grp subgrp strdat numdat     dtmdat
1   a      c      Y     11 2020-03-22
2   a      c      I     12 2020-03-23
3   a      d      V      4 2020-03-24
4   a      d      D     15 2020-03-25
5   b      c      Q      5 2020-03-26
6   b      c      C      8 2020-03-27
7   b      d      L      6 2020-03-28
8   b      d      R     10 2020-03-29
9   b      d      U      3 2020-03-30

> df <- df %>% filter(grp == "a" & subgrp == "c") %>%
+     select(c("grp", "subgrp", "strdat", "numdat", "dtmdat")) %>%
+     mutate(grp = as.chara .... [TRUNCATED]

> df <- data.frame(df)

> df[, c(grep("grp|subgrp", colnames(df), perl = T),
+     grep("listagg$", colnames(df), perl = T))]
  grp subgrp numdat_listagg        dtmdat_listagg
1   a      c          11,12 2020-03-22,2020-03-23
```
