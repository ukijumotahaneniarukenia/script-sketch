# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«

https://qiita.com/taiyodayo/items/e69d997754d55e3d7e4c</br>

```
install.packages("pacman")
```

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚ã‚Œã°ãƒ­ãƒ¼ãƒ‰ã€ãªã‘ã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒ­ãƒ¼ãƒ‰
```
pacman::p_load(stringr,dplyr,tidytext,RMeCab)
```

githubã§é–‹ç™ºä¸­ã®ã‚‚ã®ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡ºæ¥ã‚‹

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯pacmanã§ã„ã„ã¨æ€ã†ãŒã€æœ€æ–°ã®ç‰©ã«è§¦ã‚ŒãŸã„ã¨ãã¯ä»¥ä¸‹ã§

```
install.packages("devtools")
devtools::install_github("hadley/emo")
devtools::install_github("hadley/stringr")
devtools::install_github("KosukeHamazaki/RconVerteR")
```

# å‰å‡¦ç†ã®æ–¹é‡ãã®ä»–ã‚‚ã‚ã‚‚ã‚

https://tjo.hatenablog.com/entry/2013/12/17/201529</br>

# Rã«ã‚ˆã‚‹æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆå‰å‡¦ç†

https://ymattu.github.io/TokyoR64/apply/apply.html</br>


æ–‡å­—åˆ—å‡¦ç†ã®æ±ºå®šç‰ˆ

https://qiita.com/kohske/items/85d49da04571e9055c44 </br>

```
stringr
```

è¨€èªå‡¦ç†
```
tidytext
```

å½¢æ…‹ç´ è§£æ

```
RMeCab
```

Unicode

https://cran.r-project.org/web/packages/Unicode/Unicode.pdf </br>

```
Unicode
```

ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°

```
rvest
```

ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ 

```
data.table
```


# æŠ€è¡“çš„ãªè©±

## æ–‡å­—ã‚³ãƒ¼ãƒ‰

```
echo -e '\U1F4A9'{,,,,,,,} | tr -d ' ' | xargs -I@ Rscript -e 'data.frame(col1=c("@"),col2=strsplit(c("@"),"")[[1]])'
```

```
x<-as.u_char(as.u_char_range("1F400..1F4FF"))

> xx<-"\U3042"
> print(xx)
[1] "ã‚"

ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰UTF8ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
> charToRaw(xx)
[1] e3 81 82

> charToRaw(iconv(xx, from = "utf-8", to = "eucjp"))
[1] a4 a2
> charToRaw(iconv(xx, from = "utf-8", to = "utf-8"))
[1] e3 81 82
> charToRaw(iconv(xx, from = "utf-8", to = "utf-16"))
[1] ff fe 42 30
> charToRaw(iconv(xx, from = "utf-8", to = "CP932"))
[1] 82 a0
```


```
#æŒ‡å®šã—ãŸç¯„å›²ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‡ºåŠ›
#xx<-as.u_char(as.u_char_range("1F4A0..1F4A9"))
#xx
##ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰
#sapply(xx,intToUtf8)

#æŒ‡å®šã—ãŸç¯„å›²ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‡ºåŠ›
#x<-as.u_char(as.u_char_range("0041..005A"))
#x
##
###ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰
#sapply(x,intToUtf8)

#æŒ‡å®šã—ãŸç¯„å›²ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‡ºåŠ›
xxx<-as.u_char(as.u_char_range("3041..3049"))
xxx
#
##ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰
sapply(xxx,intToUtf8)

#
##æŒ‡å®šã—ãŸã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆåˆ†é¡åã«ç´ã¥ãã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‡ºåŠ›
#y<-as.u_char(utf8ToInt(paste(LETTERS,collapse="")))
#y

#paste(LETTERS)

#ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰
#sapply(y,intToUtf8)

#æŒ‡å®šã—ãŸã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆåˆ†é¡åã«ç´ã¥ãã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å°æ–‡å­—ãƒ‡ã‚³ãƒ¼ãƒ‰å‡ºåŠ›
#u_to_lower_case(LETTERS)
#
##æŒ‡å®šã—ãŸã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆåˆ†é¡åã«ç´ã¥ãã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å¤§æ–‡å­—ãƒ‡ã‚³ãƒ¼ãƒ‰å‡ºåŠ›
#u_to_upper_case(LETTERS)
#
#u_case_fold("Hi. hoi")
#
##unicodeã‚’ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆæŒ‡å®šã—ã¦U+å½¢å¼ã§å‡ºåŠ›ã—ã¦ãã‚Œã‚‹
#a<-as.u_char_range(c("00AA..00AC","01CC"))
#a
#
##unicodeå½¢å¼ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å—ã‘å–ã£ã¦<>å½¢å¼ã§å±•é–‹ã—ã¦ãã‚Œã‚‹
#as.u_char_seq(a)
#
##unicodeå½¢å¼ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å—ã‘å–ã£ã¦ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§å±•é–‹ã—ã¦ãã‚Œã‚‹
#as.u_char(a)
#
##unicodeå½¢å¼ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å—ã‘å–ã£ã¦Code,Name,Charã®åˆ—ã‚’ã‚‚ã£ã¦è¡¨å½¢å¼ã§å‡ºåŠ›ã—ã¦ãã‚Œã‚‹
#u_char_inspect(a)
#
##å¼•æ•°ã§æŒ‡å®šã—ãŸæ–‡å­—åˆ—ã‚’unicodeå½¢å¼ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§å‡ºåŠ›ã—ã¦ãã‚Œã‚‹
#c<-as.u_char_seq(c("ainekurainenahatomujiku","unko"),"")
#c
##ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰
#sapply(c,intToUtf8)
#
#d<-as.u_char(utf8ToInt("Austria"))
#d
#u_char_name(d)
```


## å…¨è§’åŠè§’å¤‰æ›

https://www.pediatricsurgery.site/entry/2017/10/12/105242</br>

```
#stringi::stri_trans_nfkc()


#https://qiita.com/makimaki913/items/df745b85b802099a6e32

#[sqliteğŸ’œceacf3fb0808 (ç« 11æœˆ 05 07:21:31) ~/script_scratch/R]$Rscript -e 'library(stringi);str = stri_rand_strings(10, 3,pattern="[ï½±-ï¾]");str;stri_trans_nfkc(str);'
# [1] "ï½ºï¾‡ï½²" "ï¾—ï¾–ï½¶" "ï¾€ï¾Œï¾‚" "ï½¾ï½·ï¾‡" "ï¾ï¾‘ï¾„" "ï¾™ï¾–ï¾—" "ï½±ï¾‚ï½²" "ï½±ï¾’ï¾" "ï¾‰ï½¾ï¾" "ï¾ï¾œï¾„"
# [1] "ã‚³ãƒŒã‚¤" "ãƒ©ãƒ¨ã‚«" "ã‚¿ãƒ•ãƒ„" "ã‚»ã‚­ãƒŒ" "ãƒãƒ ãƒˆ" "ãƒ«ãƒ¨ãƒ©" "ã‚¢ãƒ„ã‚¤" "ã‚¢ãƒ¡ãƒ"
# [9] "ãƒã‚»ãƒ" "ãƒ³ãƒ¯ãƒˆ"
#[sqliteğŸ’œceacf3fb0808 (ç« 11æœˆ 05 07:22:09) ~/script_scratch/R]$Rscript -e 'library(stringi);str = stri_rand_strings(10, 3,pattern="[ã‚¢-ãƒ³]");str;stri_trans_nfkc(str);'
# [1] "ã‚°ãƒ©ãƒ±" "ãƒœãƒƒã‚¿" "ãƒ§ãƒ¦ãƒ³" "ãƒ¬ã‚²ãƒš" "ãƒ‘ã‚¬ã‚¹" "ãƒ–ãƒ‹ã‚±" "ã‚µãƒªãƒƒ" "ãƒ–ãƒ¡ãƒ­"
# [9] "ãƒ•ã‚²ãƒ­" "ãƒƒãƒãƒƒ"
# [1] "ã‚°ãƒ©ãƒ±" "ãƒœãƒƒã‚¿" "ãƒ§ãƒ¦ãƒ³" "ãƒ¬ã‚²ãƒš" "ãƒ‘ã‚¬ã‚¹" "ãƒ–ãƒ‹ã‚±" "ã‚µãƒªãƒƒ" "ãƒ–ãƒ¡ãƒ­"
# [9] "ãƒ•ã‚²ãƒ­" "ãƒƒãƒãƒƒ"
```

## å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­è¾¼

```
source("define_library.R")
```

## ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°

https://mran.microsoft.com/package/curl</br>
https://cran.microsoft.com/web/packages/curl/curl.pdf</br>

http://ushi-goroshi.hatenablog.com/entry/2018/02/22/165551</br>

## æ¨™æº–å…¥å‡ºåŠ›

https://oku.edu.mie-u.ac.jp/~okumura/stat/rscript.html</br>

https://qiita.com/satzz/items/d85298f6bdafc2010c37</br>

```
#æ¨™æº–å…¥åŠ›ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¨ã—ã¦å¤‰æ•°ã«å–ã‚Šè¾¼ã‚€
#input<-read.table("stdin")
#input
#æ¨™æº–å…¥åŠ›ã‚’csvãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å¤‰æ•°ã«å–ã‚Šè¾¼ã‚€
input<-read.csv('stdin')
input
```

## ãƒ•ã‚¡ã‚¤ãƒ«å…¥å‡ºåŠ›

```
source("define_library.R")

pwd<-getwd()

write.table(file="output",iris,row.names=F)
```

```
#library(data.table)
#input<-read.csv(file="out_fetch")
#input<-fread(file="out_fetch")
```

## ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¿½ã„å‡ºã™

```
$time dd if=/dev/zero of=del_cache_memory  bs=1G count=30
```

## çµµæ–‡å­—

```
#source("define_library.R")
#
#unko<-emo::ji("poop")
#as.character(unko)
#unko
#charToRaw(unko)
#stri_unescape_unicode("\U0001f4a9")
#
#cat("==================================================\n")
#"\xf0\x9f\x92\xa9"
#cat("==================================================\n")
#`Encoding<-`("\xf0\x9f\x92\xa9","UTF-8")

x<-"\xf0\x9f\x92\xa9"
cat(x,'\n')
```

## ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

```
/usr/bin/time -v Rscript file_hadling.R
```

https://rpubs.com/kohske/33601</br>

```
#> options(width=1000)
#> microbenchmark(stri_detect_fixed(str, "abba"))
#Unit: milliseconds
#                           expr     min       lq     mean   median       uq      max neval
# stri_detect_fixed(str, "abba") 2.35877 2.477595 2.652027 2.525744 2.625761 3.666197   100
#> microbenchmark(stri_detect_fixed(str, "abba"))
#Unit: milliseconds
#                           expr     min       lq     mean   median      uq      max neval
# stri_detect_fixed(str, "abba") 2.27886 2.473327 2.639514 2.526299 2.63765 4.172436   100
#> microbenchmark(stri_detect_fixed(str, "abba"),grepl("abba", str, fixed=TRUE))
#Unit: milliseconds
#                             expr      min       lq     mean   median       uq      max neval
#   stri_detect_fixed(str, "abba") 2.185809 2.351770 2.485977 2.410534 2.651615 3.869586   100
# grepl("abba", str, fixed = TRUE) 2.883795 2.958876 3.084331 3.018025 3.052328 8.412701   100
```

## æ¬ æå€¤ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

https://qiita.com/fujit33/items/5950889b983f93250998</br>

## RESTAPI

https://riptutorial.com/ja/r/example/26714/opencpu%E3%82%A2%E3%83%97%E3%83%AA</br>

## JSONãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

https://riptutorial.com/ja/r/example/8123/json%E3%81%8B%E3%82%89r%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%B8%E3%81%AE-%E3%81%8B%E3%82%89%E3%81%AE</br>


## ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ç”Ÿæˆ

```
#https://mathwords.net/ehyouki

Rscript -e 'library(stringi);str = stri_rand_strings(1e+05, 10);head(str,1000)'

Rscript -e 'library(stringi);str = stri_rand_strings(1e+06, 7);head(str,100)'

Rscript -e 'library(stringi);str = stri_rand_strings(1e+06, 3,pattern="[ã‚-ã‚“]");head(str,10)'
Rscript -e 'library(stringi);str = stri_rand_strings(1e+06, 3,pattern="[a-z]");head(str,10)'
Rscript -e 'library(stringi);str = stri_rand_strings(1e+06, 3,pattern="[A-Z]");head(str,10)'
Rscript -e 'library(stringi);str = stri_rand_strings(1e+06, 3,pattern="[ã‚¢-ãƒ³]");head(str,10)'
Rscript -e 'library(stringi);str = stri_rand_strings(1e+06, 3,pattern="[ï½±-ï¾]");head(str,10)'
```

## ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

http://mo161.soci.ous.ac.jp/@d/DoDStat/DataList/indexj.html</br>

https://qiita.com/wakuteka/items/95ac758070f6f4d89a96</br>

## ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š

http://webbeginner.hatenablog.com/entry/2016/03/19/154026</br>

```
$echo {a..c} | xargs -I@ Rscript -e 'strsplit("@"," ")'
[[1]]
[1] "a" "b" "c"

$echo {a..c} | tr ' ' ',' | xargs -I@ Rscript -e 'strsplit("@",",")'
[[1]]
[1] "a" "b" "c"
```

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š

https://db.rstudio.com/ </br>

## ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯æ–‡å­—åˆ—å®Ÿè¡Œ

æ–‡å­—åˆ—ã‚’ R ã®å‘½ä»¤ã¨ã—ã¦å®Ÿè¡Œ

http://cse.naro.affrc.go.jp/takezawa/r-tips/r/17.html</br>

## ç’°å¢ƒ

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç¢ºèª

```
options()
```

ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š

```
#æ¨™æº–å‡ºåŠ›æ™‚ã®å‡ºåŠ›å¹…ã‚’æœ€å¤§ã«è¨­å®š
options(width=10000)
#è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¨ã¦ãƒŸãƒ¥ãƒ¼ãƒˆ
options(warn=-1)
```

ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç¢ºèª

```
library()
```

## ãƒ‡ãƒ¼ã‚¿å‹

https://www.yasuhisay.info/entry/20080725/1216968631</br>

https://cell-innovation.nig.ac.jp/surfers/vector_difference.html</br>

### è¡Œåˆ—

https://atarimae.biz/archives/23930</br>
https://to-kei.net/r-beginner/r-1/</br>
http://cse.naro.affrc.go.jp/takezawa/r-tips/r/19.html </br>

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ 

data.tableã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å‹ã¨ã¯ç•°ãªã‚‹ãŒäºœç¨®

https://qiita.com/gigamori/items/3f923cdd188736132237</br>

### ãƒªã‚¹ãƒˆ

http://cse.naro.affrc.go.jp/takezawa/r-tips/r/23.html</br>

## ãƒ‡ãƒ¼ã‚¿ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### é€£çµ

http://webbeginner.hatenablog.com/entry/2015/02/06/132256</br>

### ãƒ¦ãƒ‹ã‚°ãƒ©ãƒ 

youmil_rainã•ã‚“ã‹ã‚‰æ•™ãˆã¦ã‚‚ã‚‰ã£ãŸã‚„ã¤

```
Rscript -e 'library(stringi);data.frame(col1=c("ã“ã‚“ã°ã‚“ã¯"),col2=stri_extract_all_regex(c("ã“ã‚“ã°ã‚“ã¯"),".")[[1]],col3=stri_escape_unicode(stri_extract_all_regex(c("ã“ã‚“ã°ã‚“ã¯"),".")[[1]]))'
```

### ã‚¯ãƒ­ã‚¹é›†è¨ˆ

https://hikaru1122.hatenadiary.jp/entry/2015/05/07/162049</br>

https://teramonagi.hatenablog.com/entry/20150312/1426109245</br>


## ãƒ‡ãƒ¼ã‚¿å‹å¤‰æ›

###

## é–¢æ•°

### applyç³»é–¢æ•°ã®ä½¿ã„æ–¹

http://takenaka-akio.org/doc/r_auto/chapter_07_apply.html</br>

https://stats.biopapyrus.jp/r/basic/apply.html </br>

### é«˜éšé–¢æ•°

```
Rscript -e 'Reduce(function(x,y)x+y,c(1,2,3,4,5))'

echo {1..5} | tr ' ' ',' | xargs -I@ Rscript -e 'Reduce(function(x,y)x+y,c(@))'

echo {a..e} | tr ' ' ',' | xargs -I@ Rscript -e 'Reduce(function(x,y)paste(x,y),strsplit(c("@"),","))'

time echo {{1..5},{a..c}}{,,,} | tr ' ' ',' | xargs -I@ Rscript -e 'Reduce(function(x,y)paste(x,y),strsplit(c("@"),","))'

echo {a..b} | xargs -I@ Rscript -e 'paste("@","@")'

Rscript -e 'Reduce(function(x,y)paste(y,y,x,y,y),c("a","b","c","d","e"))'
```

## ãƒãƒƒãƒå‡¦ç†

https://stats.biopapyrus.jp/r/devel/commandline.html</br>

```
#!/bin/bash

circle(){
  R -q --slave --vanilla --args "$@" < <(cat <<EOS
    lft_stair<-function(argc,argv){
      rt<-list()
      for(ind in 1:argc){
        rt<-c(rt,list(c(argv[ind:argc],argv[1:ind-1])))
      }
      return(rt)
    }

    rgt_stair<-function(argc,argv){
      rt<-list()
      for(ind in 1:argc){
        rt<-c(rt,list(c(argv[1:ind-1][argc:1][!is.na(argv[1:ind-1][argc:1])],argv[argc:ind])))
      }
      return(rt)
    }
    mk_up<-function(argc,argvl,argvr){
      rt<-list()
      for(ind in 1:argc){
        rt<-c(rt,list(c(argvl[[ind]],argvr[[ind]])))
      }
      return(rt)
    }

    mk_dw<-function(argc,argvl,argvr){
      rt<-list()
      tmp<-NULL
      for(ind in 1:argc){
        tmp<-rbind(tmp,c(argvl[[ind]],argvr[[ind]]))
      }
      rt<-asplit(tmp[order(tmp[,1],decreasing=T),],1)
      return(rt)
    }
    mk_circle<-function(argc,argvu,argvd){
      rt<-list()
      for(ind in 1:argc){
        rt<-c(rt,list(argvu[[ind]]))
        rt<-c(rt,list(argvd[[ind]]))
      }
      return(rt)
    }

    show_rez<-function(argc,rez){
      for(ind in 1:argc){
        cat(enc2utf8(rez[[ind]]),"\n")
      }
    }
    pre_process<-function(){
      argv<-commandArgs()[6:length(commandArgs())]
      argc<-length(argv)
      return(list(argc,argv))
    }
    main<-function(){
      pre_done<-pre_process()
      argc<-pre_done[[1]]
      argv<-pre_done[[2]]
      lft_done<-lft_stair(argc,argv)
      rgt_done<-rgt_stair(argc,argv)
      up_done<-mk_up(length(lft_done),lft_done,rgt_done)
      dw_done<-mk_dw(length(lft_done),lft_done,rgt_done)
      circle_done<-mk_circle(length(lft_done),up_done,dw_done)
      show_rez(length(circle_done),circle_done)
    }
    main()
EOS
  )
}

main(){
  local init_args="$(cat -)";
  circle ${init_args};
}

[ -p /dev/stdin ] && cat - | main
[ -p /dev/stdin ] || echo -ne "$@" | main
```
